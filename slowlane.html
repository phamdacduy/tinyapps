<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Savings Visualization</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    </head>

    <body>
        <div class="container mt-5">
            <div class="row">
                <div class="col">
                    <label for="monthlySalary" class="form-label">Monthly Salary (VND):</label>
                    <input type="number" id="monthlySalary" class="form-control" value="10000000">
                </div>
                <div class="col">
                    <label for="annualIncrease" class="form-label">Annual Increase (%):</label>
                    <input type="number" id="annualIncrease" class="form-control" value="5">
                </div>
                <div class="col">
                    <label for="salaryJump" class="form-label">Salary Jump (%) every 3 years:</label>
                    <input type="number" id="salaryJump" class="form-control" value="25">
                </div>
                <div class="col">
                    <label for="spendingRate" class="form-label">Spending Rate (%):</label>
                    <input type="number" id="spendingRate" class="form-control" value="50">
                </div>
                <div class="col">
                    <label for="interestRate" class="form-label">Interest Rate (%):</label>
                    <input type="number" id="interestRate" class="form-control" value="7">
                </div>
                <div class="col">
                    <button onclick="updateChart()" class="btn btn-primary mt-4">Update Chart</button>
                </div>
            </div>
        </div>

        <div class="container mt-5">
            <canvas id="savingsChart" width="800" height="400"></canvas>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', () => {
                updateChart();
            });

            function updateChart() {
                const monthlySalary = parseFloat(document.getElementById('monthlySalary').value);
                const annualIncrease = parseFloat(document.getElementById('annualIncrease').value) / 100;
                const salaryJump = parseFloat(document.getElementById('salaryJump').value) / 100;
                const interestRate = parseFloat(document.getElementById('interestRate').value) / 100;
                const spendingRate = parseFloat(document.getElementById('spendingRate').value) / 100;
                const goal = 1000000000;

                let salary = monthlySalary;
                let totalSavings = 0;
                let salaryHistory = [];
                let savingsHistory = [];
                let cumulativeSavings = [];
                let years = [];
                let annualSavings = 0;

                for (let year = 0; year <= 8; year++) {
                    years.push(year);

                    // Calculate annual savings
                    annualSavings = 0;
                    for (let month = 0; month < 12; month++) {
                        let monthlySavings = salary * (1 - spendingRate);
                        annualSavings += monthlySavings;
                    }

                    totalSavings += annualSavings;
                    totalSavings *= (1 + interestRate); // Apply annual interest

                    salaryHistory.push(salary * 12); // Annual salary
                    savingsHistory.push(annualSavings);
                    cumulativeSavings.push(totalSavings);

                    // Adjust salary for the next year
                    salary *= (1 + annualIncrease);
                    if ((year + 1) % 3 === 0) {
                        salary *= (1 + salaryJump);
                    }
                }

                const ctx = document.getElementById('savingsChart').getContext('2d');
                const data = {
                    labels: years,
                    datasets: [
                        {
                            label: 'Annual Salary (VND)',
                            data: salaryHistory,
                            backgroundColor: 'rgba(75, 192, 192, 0.5)',
                            borderColor: 'rgba(75, 192, 192, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Annual Savings (VND)',
                            data: savingsHistory,
                            backgroundColor: 'rgba(153, 102, 255, 0.5)',
                            borderColor: 'rgba(153, 102, 255, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Cumulative Savings (VND)',
                            data: cumulativeSavings,
                            backgroundColor: 'rgba(255, 159, 64, 0.5)',
                            borderColor: 'rgba(255, 159, 64, 1)',
                            borderWidth: 1
                        }
                    ]
                };

                const config = {
                    type: 'bar',
                    data: data,
                    options: {
                        responsive: true,
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: 'Years'
                                }
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: 'Amount (VND)'
                                },
                                beginAtZero: true
                            }
                        }
                    }
                };

                new Chart(ctx, config);
            }
        </script>
    </body>

</html>